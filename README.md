# BattleShip
バトルシップは5×5マスに配置された3種類の戦艦について、どちらかの持ち艦がなくなるまで、その中で自艦を移動したり、敵艦を攻撃するゲームです。  

今回は下記のルールとしました。  
・5×5マス（コード上で変更可能）  
・所持艦は3種類から1艦を選ぶ（所持数はコード上で変更可能）  
・プレイヤー先行固定  
・自ターンでの行動は1艦による攻撃か艦の移動  
・艦の移動は種類に限らず左右上下と斜め1マス移動可能  
・攻撃は5×5どこでも可能  
・攻撃が艦に隣接（左右上下と斜め）する場合には  
・所持艦数が複数ある場合には同じマスに艦を移動できない  
  
それぞれの陣地は5行5列の配列で情報を格納することとしています。  
X軸Y軸の表示については慣習的なものからプレイヤーにとっつきやすいと思われる図1の通り横⇒X軸、縦⇒Y軸としています。  
このため、**プレイヤーに表示しているX軸、Y軸と関数内で使用しているx, yは、xが行、yが列として扱っているので混同しないよう注意して下さい。**  

処理は下記の画像の通りになります。  
  
![メイン関数の処理](https://user-images.githubusercontent.com/111070447/185761697-28e231c7-580a-4704-a8d3-7fb825fa1ea1.png)
  
### InitialMAP()関数
すべてのマスにNOSHIP（-1）を代入します。

### ShipSelect()関数
scanf関数を用いて戦艦の種類を選択します。  
この時、対応する戦艦のライフを構造体のオブジェクトに格納します。  
ShipInitialPosition()関数を呼び出して、初期位置を決定します。  
### ShipInitialPosition()関数
マップに現在配置されている戦艦表示するPrintMapMark()関数を呼び出します。  
scanf関数で戦艦の初期位置（X軸Y軸）を選択します。  
選択したデータを構造体のオブジェクトに格納します。  

### EnemySet()関数
ランダムでSUBMARINE, DESTORYER, WARSHIPを決定して、初期位置（X軸Y軸）もランダムで決定します。  
決定した値を構造体のオブジェクトに格納します。  

### PrintMapMark()関数
マップに表示する値は二次元配列mapmarkの値を用いています。  
※二次元配列となっているのは全角文字を用いるためです。  
```c
char mapmark[][SHIPNAMENUMBER]={"□", "Ｓ", "Ｄ", "Ｗ"};	//map用
```

### PlayerTurn()関数
プレイヤーの番が来た時の処理を管理しています。  
scanf関数で0~2を入力して、対応する関数を呼び出します。  

#### ShootPosition()関数
攻撃位置（X軸Y軸）をscanf関数で読み取ります。  
CheckHit()関数で着弾（HIT）、近くに落下（NEAR）、ミス（MIS）を返して画面表示します。

##### CheckHit()関数
列挙体 shootを用いて、
```c
enum shoot {MISS, NEAR, HIT};
```
攻撃位置に何らかの戦艦がいる場合にHITを返します。
攻撃位置から上下左右斜め1マスに何らかの戦艦がいる場合にNEARを返します。
それ以外の時にMISSを返します。

### EnemyTurnEasy()関数
攻撃か戦艦移動のどちらかをランダムで決定します。  
攻撃時の座標（X軸Y軸）共にランダムで決定します。  
攻撃が当たったかどうかをCheckHit()関数で判定します。  
移動時には移動する戦艦をランダムで決定して、ライフが1以上の戦艦を選びます（Bflagを1にする）。  
戦艦の現在位置から上下左右斜め1マスで障害がない場所にランダムで移動します。  
移動後の入れ替えデータを構造体のオブジェクトに反映させます。

# 機能追加や修正
・戦艦の種類を追加したりマップに障害物を追加したいときは下記を利用して下さい。  
```c
char shipfullname[][SHIPNAMENUMBER]={"Submarine", "Destroyer", "WarShip"};  //戦艦の名前表示用
char shipmark[]={'S', 'D', 'W'};  //戦艦用
char mapmark[][SHIPNAMENUMBER]={"□", "Ｓ", "Ｄ", "Ｗ"};  //map用
```
また、戦艦のライフは
```c
enum life {SUBMARINE=1, DESTROYER, WARSHIP};
```
をご活用下さい。
  
・ターン交代は
```c
if(player_turn>0){
    PlayerTurn(&myship, &enemyship, &check_game);
}else{
    EnemyTurnEasy(&enemyship, &myship, &check_game);
}
player_turn *= -1;
```
正負で判定しています。  
先行後攻を変更したいときはplayer_turn変数を利用して下さい。  
  
・攻撃範囲の設定は下記が活用できます。  
爆撃中心から上下左右斜め1マス
```c
for(int py=y-1; py<=y+1; py++){
    for(int px=x-1; px<=x+1; px++){
        処理内容
    }
}
```
